---
title: 可能这辈子都记不住了
date: 2017-08-02 14:56:32
categories:
    - 烂笔头
---

>一些琐碎记不住的东西

<!-- more -->

## 逗号运算符

表达形式： 表达式1，表达式2 ... 表达式n
求解过程： 先计算表达式1，在计算表达式2，以此类推。
最终的值为表达式n的值

![运算符优先级](https://myblog-static.oss-cn-beijing.aliyuncs.com/post-imgs/%E9%97%AA%E5%BF%B5%E8%83%B6%E5%9B%8A/%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7.png?x-oss-process=style/blogImg-watermark)

```js
x = 8*2,x*4
// 先计算 8*2 再赋值给 x 最后计算表达式结果为 64  x最终值为 16
```


```js
(x=8*2,x*4),x*2
// 先赋值 x=16 再逗号得64 ，最后外层逗号得整个表达式的值为32， x最终为16
```

```js
x=(z=5,5*2) /*整个表达式为赋值表达式，它的值为10，z的值为5*/
x=z=5,5*2 /*整个表达式为逗号表达式，它的值为10，x和z的值都为5*/
```

## 带命名空间的事件(namespaced events)
`on()`事件的第一个参数是事件的类型，可以通过`click.[name]`的方式对事件加标识以方便后期移除特定事件。代码如下：
```js
$('a').on('click', function() {
  //Handler 1
});
$('a').on('click', function() {
  //Handler 2
});

$('a').off('click') 会将两个移除

```

```js
$('a').on('click.namespace1', function() {
  //Handler 1
});
$('a').on('click.namespace2', function() {
  //Handler 2
});

$('a').off('click.namespace2');

```
只移除名叫`namespace2`的点击事件


## 几个测试题
```js
[] == []   // fasle
5 =='5'    // true
5 === '5'  // fale
5 / 0      // Infinity
+new Date() //
```

## this
```js
function Person() {
  this.age = 0;       // 指向实例化的对象
  setInterval(function growup() {
    this.age++;       // 指向 window
  }, 1000);
}

var p = new Person();
```

## `typeof(null) === 'object'` 的原理
不同对象在底层都为二进制，在 JS 中前三位都为 0 的话就会被判定为 `object`，`null` 的二进制都是 0。

## Javascript 类型

**主类型(6)**: `null`, `undefined`, `boolean`, `number`, `string`, `object`

**object 子类型(9)**：`String`, `Number`, `Function`, `Boolean`,`Array`, `Date` `Object`, `RegExp`, `Error`

## https 请求方式

`options`, `head`, `put`, `delete`, `get`, `get`, `post`, `trace`, `connect`

## 阻止表单提交

```js
form.addEventListener("submit", function(e) {
  var event = event || window.event;
  event.preventDefault();
  window.event.returnValue = false;  // IE 6 ~ 8
})
```

`jQuery`实现：

```js
// 取消表单提交动作，防止事件冒泡
$(form).on('submit', false);

// 仅取消默认动作
$(form).on('submit', function(event) {
  event.preventDefault();
})

// 防止事件冒泡，但不禁止提交行为
$(form).on('submit', function(event) {
  event.stopPropagation();
})
```

## 禁用 `input` 记忆性输入

```html
IE: <input type="text" autocomplete = "off">
Firefox: <input type="text" disableautocomplete="off">
若Firefox方式对chrome无效，则在 <form> 上统一设置 autocompelet = "off"
```

## `jQuery` 事件委托

```js
$('body').on('click', 'div', function() {
  console.log($(this).text());
})
```

## 快速生成时间戳

```js
var current = +new Date();
```

## 跨 `iframe` 获取元素

```js
$('子元素', '父元素')
```
`window.parent.document` 包含当前窗口的父窗口

## `Document.readyState` 文档加载状态

value:
- `loading`/ 加载中 => `document` 仍在加载中

- `interactive` / 互动 => `document` 已被加载和解析，但 `image`, `CSS`, `Javascript` 仍在加载中。 **此阶段会触发 `DomContentLoaded` 事件**

- `compete` / 完成 =>  `document` 和所有子资源完成加载。 **`load` 事件加载**

> `readyState` 属性值变化会触发 `document.onreadyStateChange` 事件

IE 下 `document.documentElement.doScroll`，是 IE 下特有的方法，检测 `DOM` 是否加载完成。

## 行内元素转块级元素

`position: absolute / fixed;` 和 `float` 都可以使 行内元素转为块级元素

## i++ 与 ++i

![++i & i++](https://myblog-static.oss-cn-beijing.aliyuncs.com/post-imgs/%E9%97%AA%E5%BF%B5%E8%83%B6%E5%9B%8A/%2B%2Bi%26i%2B%2B.png?x-oss-process=style/blogImg-watermark)

例：购物车修改数量

```js
shuliang = (++shuliang > stock ? stock : shuliang)
```

## 取整与转换

```js
var ac = '1.23423';

/**
* 字符串转数字
*/
+ac  // 1.23423

/**
* 取整
*/
~~ac
ac >> 0
```

## 判断奇偶

```js
(222 & 1) == 0 ? '偶数' : '奇数'

/**
*取最近的偶数
*/
( 1111 | 1 )  // 1110

/**
*除2取整
*/
~~(5/2)
5 >> 1
```

## 强制 Webkit 内核渲染

很多国产浏览器都是双内核，例如“360、QQ”等，它们都提供了强制使用 Webkit 内核渲染的开启模式

```html
<meta name="renderer" content="webkit" />
```